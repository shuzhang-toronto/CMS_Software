<!doctype html>
<html ng-app="softwareRequestApp">
<head>
	<!-- <link rel="stylesheet" type="text/css" href="static/style.css"> -->
	<style>
		body {
			font-family:Helvetica, Arial, sans-serif;
			font-size:8pt;
		}

		h2 {
			color:grey;
			text-align:left;
			font-size:16pt;
		}
  
		keyframes colours {
			0% {color: red; }
			100% {color: inherit; }
		}
		
		fieldset {
			border: 0;
		}

		
		table{
			margin-left: 0px;
			margin-right: auto;
			font-family:Verdana;
			font-size:10pt;
			margin-left: 0px
			;margin-right: auto
		}
		th{
			color:white; 
			background-Color:#74828F;
		}
		tr {
			color:grey
		}
		TR:Nth-Child(even) {
			Background-Color: #FEF6EB;
		}
		tr,td,th {
			padding: 2px; 
			margin: 0px;
			text-align: center;
			vertical-align:top
		}
		tr:hover {
			background-color: darkgray;
		}
	
		.edit-in-place {
		  display: block;
		  width=100%;
		  height=100%;
		  overflow:auto;
		  min-height: 10px;
		}
		.edit-in-place label {
		  cursor: pointer;
		  display: block;
		  width=100%;
		  height=100%;
		  overflow:auto;
		  min-height: 10px;
		  min-width: 50px;
		}
		
		.edit-in-place input {
		  display: none;
		}

		.edit-in-place.active label {
		  display: none;
		}

		.edit-in-place.active input {
		  display: inline-block;
		}
	</style>
	<title>Request Software</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.js"></script>
	<script type="text/javascript">
		var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	</script>
	<script src="static/js/app.js"> </script>
</head>
<body ng-controller="MainCtrl">
	<div class="nav">
		<a href="{{ url_for('logout') }}">log out</a>
	</div>
	{% raw %}
	<div class="add-software">
		<form ng-submit="addSoftware()">
			<fieldset ng-disabled="isLoading">
			<input type="text" required placeholder="software" ng-model="newSoftware.name">
			<input type="text" ng-hide="true" placeholder="version" ng-model="newSoftware.notes">
			<input type="submit" value="Add">
			<fieldset ng-disabled="{{isLoading}}">
		</form>
	</div>
	<div id="bysy_indicator" ng-hide="!isLoading">
		<img src="static/resources/indicator.gif" />
	</div>
	<div class="main" ng-hide="isLoading">
		
		<button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">
			Previous
		</button>
		{{currentPage+1}}/{{numberOfPages}}
		<button ng-disabled="currentPage == numberOfPages-1" ng-click="currentPage=currentPage+1">
			Next
		</button>

		<table>
			<thead>
			<tr>
				<td>Software</td>
				<td tabindex="{{$index}}">{{allUsers[0].name}}</td>
				<td ng-repeat="u in allUsers | startFrom: currentPage*(pageSize-1) + 1 | limitTo:pageSize -1 ">
					{{u.name}}
				</td>
			</tr>
			</thead>
			<tr ng-repeat="s in softwares">
			    <td>{{s.name}}</td>
				<td><edit-in-place value="s.usage[0]"></edit-in-place></td>
				<td ng-repeat="use in s.usage | startFrom: currentPage*(pageSize-1) + 1 | limitTo:pageSize -1 track by $index">
					{{use | replaceEmpty : '&nbsp;'}}
				</td>
			</tr>
		</table>
	</div>
	{% endraw %}
	<div class="submit">
		<button ng-click="submit()" ng-disabled="isLoading">Save Changes</button>
	</div>
</body>
</html>
